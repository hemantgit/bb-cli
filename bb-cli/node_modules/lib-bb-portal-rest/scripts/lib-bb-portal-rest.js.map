{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///scripts/lib-bb-portal-rest.js","webpack:///webpack/bootstrap 1e08ea2194cb6d12be8d","webpack:///./scripts/index.js","webpack:///./scripts/request.js","webpack:///./scripts/utils.js","webpack:///external \"jxon\"","webpack:///./scripts/response.js","webpack:///./scripts/errors/2xx.js","webpack:///./scripts/errors/5xx.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_interopRequireDefault","default","BBRest","config","log","create","cnf","Error","assign","defaults","plugin","response","_response2","verbose","console","defineProperty","value","_request","_request2","_response","_utils","utils","scheme","host","port","context","username","password","portal","outputJxon","server","a","catalog","item","push","portalCatalog","container","containerName","widget","widgetName","page","pageName","link","linkName","user","userName","showGroups","groupName","group","showUsers","template","templateName","audit","meta","cache","type","import","importItem","toPortal","export","uuid","query","portalName","includeGroups","exportItem","itemName","fromPortal","auto","payload","overrideMethod","payloadType","getPayloadType","payloadParse","t","get","then","payloadRes","doAuto","stringToJs","jx","aKey","keys","bKey","contextItemName","items","method","httpMethod","plural","charAt","length","substr","indexOf","getFullUri","url","params","fullUrl","map","encodeURIComponent","join","BBReq","cmnd","uri","command","qs","headers","Content-Type","cch","rights","tag","tagName","tagType","o","file","_file","Connection","targetFile","prepareRequest","post","put","delete","deleteAllCache","toSend","getUri","upload","download","that","body","jsToString","doRequest","getRequestBody","fileContent","request","res","i","v","r","status","cfg","orchestrator","js","ret","_jxon2","err","e","message","JSON","stringify","error","str","TypeError","lastError","DOMParser","xml","stringToXml","el","getElementsByTagName","xmlToJs","level","msg","div","_","_typeof","trim","Symbol","iterator","constructor","_jxon","parserErrorHandler","_classCallCheck","instance","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","enumerable","writable","configurable","setPrototypeOf","__proto__","getContentType","typeHeader","split","matchError","matches","contentType","match","find","search","callback","parseResponse","errorMessage","_xx2","CXPError","href","urlParse","location","statusText","_xx4","_xx","_xx3","_Error","raw","_this","getPrototypeOf","captureStackTrace","name","html","pre"],"mappings":"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","file":"scripts/lib-bb-portal-rest.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jxon\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"scripts/lib-bb-portal-rest.js\", [\"jxon\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"scripts/lib-bb-portal-rest.js\"] = factory(require(\"jxon\"));\n\telse\n\t\troot[\"scripts/lib-bb-portal-rest.js\"] = factory(root[\"jxon\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jxon\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"scripts/lib-bb-portal-rest.js\", [\"jxon\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"scripts/lib-bb-portal-rest.js\"] = factory(require(\"jxon\"));\n\telse\n\t\troot[\"scripts/lib-bb-portal-rest.js\"] = factory(root[\"jxon\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = create;\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tvar _response = __webpack_require__(4);\n\t\n\tvar _response2 = _interopRequireDefault(_response);\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar utils = _interopRequireWildcard(_utils);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar defaults = {\n\t  scheme: 'http',\n\t  host: 'localhost',\n\t  port: '7777',\n\t  context: 'portalserver',\n\t  username: 'admin',\n\t  password: 'admin',\n\t  portal: null,\n\t  outputJxon: true,\n\t  verbose: false\n\t};\n\t\n\tfunction BBRest(config) {\n\t  this.config = config;\n\t  this.config.log('Configuration', config);\n\t}\n\t\n\tfunction create(cnf) {\n\t  if (!{}.hasOwnProperty.call(cnf, 'plugin')) {\n\t    throw new Error('Configuration object must define plugin property');\n\t  }\n\t  var config = Object.assign({}, defaults, cnf);\n\t  if (!{}.hasOwnProperty.call(cnf.plugin, 'response')) {\n\t    config.plugin.response = _response2.default;\n\t  }\n\t\n\t  if (cnf.verbose) {\n\t    if ({}.hasOwnProperty.call(cnf.plugin, 'log')) {\n\t      config.log = cnf.plugin.log;\n\t    } else {\n\t      config.log = console.log;\n\t    }\n\t  } else {\n\t    config.log = function () {};\n\t  }\n\t\n\t  return new BBRest(config);\n\t}\n\t\n\tObject.assign(BBRest.prototype, {\n\t  server: function server() {\n\t    return new _request2.default('server', this.config, ['portals']);\n\t  },\n\t  portal: function portal() {\n\t    var a = ['portals', this.config.portal];\n\t    return new _request2.default('portal', this.config, a);\n\t  },\n\t  catalog: function catalog(item) {\n\t    var a = ['catalog'];\n\t    if (item) a.push(item);\n\t    return new _request2.default('server', this.config, a);\n\t  },\n\t  portalCatalog: function portalCatalog(item) {\n\t    var a = ['portals', this.config.portal, 'catalog'];\n\t    if (item) a.push(item);\n\t    return new _request2.default('portal', this.config, a);\n\t  },\n\t  container: function container(containerName) {\n\t    var a = ['portals', this.config.portal, 'containers'];\n\t    if (containerName) a.push(containerName);\n\t    return new _request2.default('container', this.config, a);\n\t  },\n\t  widget: function widget(widgetName) {\n\t    var a = ['portals', this.config.portal, 'widgets'];\n\t    if (widgetName) a.push(widgetName);\n\t    return new _request2.default('widget', this.config, a);\n\t  },\n\t  page: function page(pageName) {\n\t    var a = ['portals', this.config.portal, 'pages'];\n\t    if (pageName) a.push(pageName);\n\t    return new _request2.default('page', this.config, a);\n\t  },\n\t  link: function link(linkName) {\n\t    var a = ['portals', this.config.portal, 'links'];\n\t    if (linkName) a.push(linkName);\n\t    return new _request2.default('link', this.config, a);\n\t  },\n\t  user: function user(userName, showGroups, groupName) {\n\t    var a = ['users'];\n\t    if (userName) a.push(userName);\n\t    if (showGroups) a.push('groups');\n\t    if (groupName) a.push(groupName);\n\t    return new _request2.default('user', this.config, a);\n\t  },\n\t  group: function group(groupName, showUsers, userName) {\n\t    var a = ['groups'];\n\t    if (groupName) a.push(groupName);\n\t    if (showUsers) a.push('users');\n\t    if (userName) a.push(userName);\n\t    return new _request2.default('group', this.config, a);\n\t  },\n\t  template: function template(templateName) {\n\t    var a = ['templates'];\n\t    if (templateName) a.push(templateName);\n\t    return new _request2.default('template', this.config, a);\n\t  },\n\t  audit: function audit(meta) {\n\t    return new _request2.default('audit', this.config, [meta ? 'auditmeta' : 'auditevents']);\n\t  },\n\t  cache: function cache(type) {\n\t    var a = ['caches', type];\n\t    return new _request2.default('cache', this.config, a);\n\t  },\n\t  import: function _import() {\n\t    var a = ['import', 'portal'];\n\t    return new _request2.default('import', this.config, a);\n\t  },\n\t  importItem: function importItem(toPortal) {\n\t    var a = ['import', 'package'];\n\t    if (toPortal) a.push(this.config.portal);\n\t    return new _request2.default('importItem', this.config, a);\n\t  },\n\t  export: function _export(uuid) {\n\t    var a = void 0;\n\t    if (uuid) {\n\t      a = ['orchestrator', 'export', 'files', uuid];\n\t      return new _request2.default('export', this.config, a);\n\t    }\n\t    a = ['export', 'portal'];\n\t    return new _request2.default('export', this.config, a).query({ portalName: this.config.portal, includeGroups: true });\n\t  },\n\t  exportItem: function exportItem(itemName, fromPortal) {\n\t    var a = ['export', 'package'];\n\t    if (fromPortal) a.push(this.config.portal);\n\t    a.push(itemName);\n\t    return new _request2.default('exportItem', this.config, a);\n\t  },\n\t  auto: function auto(payload, overrideMethod) {\n\t    var payloadType = utils.getPayloadType(payload);\n\t    var payloadParse = void 0;\n\t    var t = this;\n\t\n\t    if (payloadType === 'path') {\n\t      return this.config.plugin.get(payload).then(function (payloadRes) {\n\t        return t.doAuto(utils.stringToJs(payloadRes), overrideMethod);\n\t      });\n\t    }\n\t    if (payloadType === 'xml') payloadParse = utils.stringToJs(payload);\n\t    return t.doAuto(payloadParse || payload, overrideMethod);\n\t  },\n\t  doAuto: function doAuto(jx, overrideMethod) {\n\t    var aKey = Object.keys(jx)[0];\n\t    var bKey = Object.keys(jx[aKey])[0];\n\t    var context = jx[aKey][bKey].contextItemName;\n\t    var items = ['container', 'widget', 'page', 'link', 'template', 'user', 'group'];\n\t    var method = void 0;\n\t    var httpMethod = void 0;\n\t\n\t    switch (aKey) {\n\t      case 'catalog':\n\t        if (context === '[BBHOST]') {\n\t          method = 'catalog';\n\t          httpMethod = 'post';\n\t        } else {\n\t          method = 'portalCatalog';\n\t          httpMethod = 'post';\n\t        }\n\t        break;\n\t      case 'portals':\n\t        method = 'server';\n\t        httpMethod = 'post';\n\t        break;\n\t      case 'portal':\n\t        method = 'server';\n\t        httpMethod = 'put';\n\t        break;\n\t      default:\n\t        {\n\t          var plural = aKey.charAt(aKey.length - 1) === 's';\n\t          if (plural) {\n\t            if (aKey.substr(0, aKey.length - 1) === bKey) {\n\t              method = bKey;\n\t              httpMethod = 'post';\n\t            } else {\n\t              throw new Error(aKey + ' must be plural of ' + bKey);\n\t            }\n\t          } else {\n\t            if (items.indexOf(aKey) !== -1) {\n\t              method = aKey;\n\t              httpMethod = 'put';\n\t            } else {\n\t              method = aKey;\n\t              httpMethod = 'post';\n\t            }\n\t          }\n\t          break;\n\t        }\n\t    }\n\t\n\t    if (overrideMethod) httpMethod = overrideMethod;\n\t    return this[method]()[httpMethod](jx);\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = BBReq;\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar utils = _interopRequireWildcard(_utils);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\t// cache names for deleteAll\n\tvar cch = ['globalModelCache', 'retrievedWidgetCache', 'widgetChromeStaticCache', 'serverSideClosureCache', 'urlLevelCache', 'contentTemplateCache', 'webCache', 'gModelCache', 'uuidFromExtendedItemNamesCache', 'springAclCacheRegion', 'springAclSidCacheRegion', 'contextNameToItemNameToUuidCache', 'widgetCache', 'uuidToContentReferencesCache', 'itemUuidToReferencingLinkUuidsCache', 'uuidToCacheKeysCache', 'versionBundleCache'];\n\t\n\tfunction getFullUri(url, query) {\n\t  var params = Object.keys(query);\n\t  var fullUrl = url;\n\t  if (params.length) {\n\t    params.map(function (key) {\n\t      return encodeURIComponent(key) + '=' + encodeURIComponent(query[key]);\n\t    });\n\t    fullUrl += '?' + params.join('&');\n\t  }\n\t  return fullUrl;\n\t}\n\t\n\tfunction BBReq(cmnd, cnf, uri) {\n\t  this.command = cmnd;\n\t  this.config = Object.assign({}, cnf);\n\t  this.uri = uri;\n\t  this.qs = {};\n\t  this.headers = {\n\t    'Content-Type': 'application/xml'\n\t  };\n\t}\n\tObject.assign(BBReq.prototype, {\n\t  rights: function rights() {\n\t    this.uri.push('rights');\n\t    return this;\n\t  },\n\t  tag: function tag(tagName, tagType) {\n\t    this.uri.push('tags');\n\t    if (tagName) this.uri.push(tagName);\n\t    if (tagType) this.qs.type = tagType;\n\t    return this;\n\t  },\n\t  query: function query(o) {\n\t    this.qs = o;\n\t    return this;\n\t  },\n\t  file: function file(_file) {\n\t    if (this.uri[0] === 'import') {\n\t      this.headers['Content-Type'] = 'multipart/form-data';\n\t      this.headers.Connection = 'keep-alive';\n\t      if (this.uri[1] !== 'package') {\n\t        this.uri = ['orchestrator', 'import', 'upload'];\n\t      }\n\t    }\n\t    this.targetFile = _file;\n\t    return this;\n\t  },\n\t  get: function get() {\n\t    /* methods that use .xml:\n\t     * portal().xml().get()\n\t     * portalCatalog('item').get()\n\t     * container('name').xml().get()\n\t     * widget('name').xml().get()\n\t     * page('name').xml().get()\n\t     * link('name').xml().get() */\n\t    if (this.uri[0] === 'portals' && this.uri.length === 2) this.uri[1] += '.xml';\n\t    if (this.uri[2] === 'catalog' && this.uri[3]) this.uri[3] += '.xml';\n\t    if (this.uri[4] !== 'rights') {\n\t      if (this.uri[2] === 'pages' && this.uri[3]) this.uri[3] += '.xml';\n\t      if (this.uri[2] === 'containers' && this.uri[3]) this.uri[3] += '.xml';\n\t      if (this.uri[2] === 'widgets' && this.uri[3]) this.uri[3] += '.xml';\n\t      if (this.uri[2] === 'links' && this.uri[3]) this.uri[3] += '.xml';\n\t    }\n\t    this.method = 'GET';\n\t    return this.prepareRequest();\n\t  },\n\t  post: function post(payload) {\n\t    this.method = 'POST';\n\t    if (this.uri[0] === 'export' && this.uri[1] !== 'package') {\n\t      this.uri = ['orchestrator', 'export', 'exportrequests'];\n\t    }\n\t    return this.prepareRequest(payload);\n\t  },\n\t  put: function put(payload) {\n\t    this.method = 'PUT';\n\t    return this.prepareRequest(payload);\n\t  },\n\t\n\t  // fixing inconsistencies in API\n\t  // server /delete/catalog POST\n\t  // portal /portals/[portal_name]/delete/catalog POST\n\t  // link /portals/[portal_name]/delete/links POST\n\t  delete: function _delete(payload) {\n\t    this.method = 'DELETE';\n\t    if (payload) {\n\t      this.method = 'POST';\n\t      switch (this.command) {\n\t        case 'server':\n\t          this.uri = ['delete', 'catalog'];\n\t          break;\n\t        case 'portal':\n\t          this.uri[2] = 'delete';\n\t          this.uri[3] = 'catalog';\n\t          break;\n\t        case 'link':\n\t          this.uri[2] = 'delete';\n\t          this.uri[3] = 'links';\n\t          break;\n\t        default:\n\t        // code\n\t      }\n\t    }\n\t    if (this.command === 'cache' && this.uri[1] === 'all') {\n\t      return this.deleteAllCache(0);\n\t    }\n\t    return this.prepareRequest(payload);\n\t  },\n\t  prepareRequest: function prepareRequest(payload) {\n\t    var payloadType = payload ? utils.getPayloadType(payload) : '';\n\t    var toSend = {\n\t      url: getFullUri(this.getUri(), this.qs),\n\t      method: this.method,\n\t      query: this.qs,\n\t      headers: this.headers,\n\t      username: this.config.username,\n\t      password: this.config.password,\n\t      file: this.targetFile\n\t    };\n\t    if (this.targetFile) {\n\t      if (this.method === 'POST') {\n\t        toSend.upload = toSend.url.indexOf('import/package') === -1 ? 'file' : 'package';\n\t      } else if (toSend.url.indexOf('/export/') > -1) {\n\t        toSend.download = true;\n\t      }\n\t    }\n\t    var that = this;\n\t\n\t    switch (payloadType) {\n\t      case 'jxon':\n\t        toSend.body = utils.jsToString(payload);\n\t        return this.doRequest(toSend);\n\t      case 'path':\n\t        return this.config.plugin.getRequestBody(payload).then(function (fileContent) {\n\t          toSend.body = fileContent;\n\t          return that.doRequest(toSend);\n\t        });\n\t      default:\n\t        toSend.body = payload;\n\t        return this.doRequest(toSend);\n\t    }\n\t  },\n\t  doRequest: function doRequest(toSend) {\n\t    var that = this;\n\t    return this.config.plugin.request(toSend, this.config.log).then(function (res) {\n\t      that.config.log('Response', res);\n\t      return that.config.plugin.response(that.config, toSend, res);\n\t    });\n\t  },\n\t  deleteAllCache: function deleteAllCache(i) {\n\t    var t = this;\n\t    this.uri[1] = cch[i];\n\t    return this.prepareRequest().then(function (v) {\n\t      if (i < cch.length - 1) return t.deleteAllCache(i + 1);\n\t      return v;\n\t    }).catch(function (r) {\n\t      if (r.response.status === 404 && i < cch.length - 1) return t.deleteAllCache(i + 1);\n\t      return r;\n\t    });\n\t  },\n\t  getUri: function getUri() {\n\t    var cfg = this.config;\n\t    if (this.uri[0] === 'orchestrator' && cfg.orchestrator) cfg = this.config.orchestrator;\n\t\n\t    return cfg.scheme + '://' + cfg.host + ':' + cfg.port + '/' + cfg.context + '/' + this.uri.join('/');\n\t  }\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\texports.jsToString = jsToString;\n\texports.stringToJs = stringToJs;\n\texports.getPayloadType = getPayloadType;\n\t\n\tvar _jxon = __webpack_require__(3);\n\t\n\tvar _jxon2 = _interopRequireDefault(_jxon);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar lastError = void 0;\n\t_jxon2.default.config({\n\t  parserErrorHandler: function onError(level, msg) {\n\t    lastError.level = level;\n\t    lastError.msg = msg;\n\t  }\n\t});\n\t\n\tfunction jsToString(js) {\n\t  try {\n\t    var ret = _jxon2.default.jsToString(js);\n\t    if (ret[0] !== '<') throw new Error('Invalid parameter:');\n\t    return ret;\n\t  } catch (err) {\n\t    var e = new Error('jxon.jsToString error\\n' + err.message + '\\n' + JSON.stringify(js));\n\t    e.error = err;\n\t    throw e;\n\t  }\n\t}\n\tfunction stringToJs(str) {\n\t  try {\n\t    if (typeof str !== 'string') throw new TypeError('Invalid parameter:');\n\t    if (!str.length) return {};\n\t    lastError = {};\n\t    var ret = void 0;\n\t    if (typeof DOMParser !== 'undefined') {\n\t      // if runs in browser\n\t      var xml = _jxon2.default.stringToXml(str);\n\t      var el = xml.getElementsByTagName('parsererror');\n\t      ret = _jxon2.default.xmlToJs(xml);\n\t\n\t      if (el.length > 0) {\n\t        lastError.level = 'fatalError';\n\t        lastError.msg = _jxon2.default.xmlToJs(el[0]).div._;\n\t      }\n\t    } else {\n\t      ret = _jxon2.default.stringToJs(str);\n\t    }\n\t    if (lastError.level && lastError.level !== 'warning') throw new Error(lastError.msg);\n\t    return ret;\n\t  } catch (err) {\n\t    var e = new Error('jxon.stringToJs error\\n' + err.message + '\\n' + JSON.stringify(str));\n\t    e.error = err;\n\t    throw e;\n\t  }\n\t}\n\t\n\tfunction getPayloadType(payload) {\n\t  if ((typeof payload === 'undefined' ? 'undefined' : _typeof(payload)) === 'object') return 'jxon';\n\t  if (typeof payload !== 'string' || payload === '') throw new Error('Wrong payload: ' + payload);\n\t  if (payload.trim().charAt(0) === '<') return 'xml';\n\t  return 'path';\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = parseResponse;\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar utils = _interopRequireWildcard(_utils);\n\t\n\tvar _xx = __webpack_require__(5);\n\t\n\tvar _xx2 = _interopRequireDefault(_xx);\n\t\n\tvar _xx3 = __webpack_require__(6);\n\t\n\tvar _xx4 = _interopRequireDefault(_xx3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar CXPError = function (_Error) {\n\t  _inherits(CXPError, _Error);\n\t\n\t  function CXPError(message, raw, toSend, config) {\n\t    _classCallCheck(this, CXPError);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CXPError).call(this, message + ' ' + toSend.url));\n\t\n\t    _this.response = raw;\n\t    _this.request = toSend;\n\t    _this.config = config;\n\t    Error.captureStackTrace(_this, _this.constructor.name);\n\t    return _this;\n\t  }\n\t\n\t  return CXPError;\n\t}(Error);\n\t\n\tfunction getContentType(headers) {\n\t  var typeHeader = headers['content-type'];\n\t  return typeHeader ? typeHeader.split(';')[0] : '';\n\t}\n\t\n\tfunction matchError(matches, headers, body) {\n\t  var contentType = getContentType(headers);\n\t\n\t  var match = matches.find(function (item) {\n\t    return body.indexOf(item.search) > -1 && item.contentType === contentType;\n\t  });\n\t  if (match) return match.callback(body);\n\t  return false;\n\t}\n\t\n\t/*\n\t * config - bbrest main config object(scheme, host etc)\n\t * toSend - object passed to plugin.request(url, method, query, headers...)\n\t * res - response object(status, statusText, headers, body)\n\t */\n\tfunction parseResponse(config, toSend, res) {\n\t  var errorMessage = void 0;\n\t\n\t  if (res.status >= 200 && res.status < 300) {\n\t    if (errorMessage = matchError(_xx2.default, res.headers, res.body)) {\n\t      throw new CXPError(errorMessage, res, toSend, config);\n\t    }\n\t    // download\n\t    if (getContentType(res.headers) === 'application/octet-stream') return toSend.file;\n\t\n\t    if (config.outputJxon) {\n\t      return utils.stringToJs(res.body);\n\t    }\n\t    return res.body;\n\t  } else if (res.status >= 300 && res.status < 400) {\n\t    var href = config.plugin.urlParse(res.headers.location);\n\t    throw new CXPError('CXPRedirect: ' + href.query.errorMessage, res, toSend, config);\n\t  } else if (res.status >= 400 && res.status < 500) {\n\t    throw new CXPError(res.status + ' ' + res.statusText, res, toSend, config);\n\t  }\n\t  if (errorMessage = matchError(_xx4.default, res.headers, res.body)) {\n\t    throw new CXPError(errorMessage, res, toSend, config);\n\t  }\n\t  throw new CXPError(res.status + ' ' + res.statusText, res, toSend, config);\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\texports.default = [{\n\t  contentType: 'text/html',\n\t  search: '<form action=\"/portalserver/j_spring_security_check\" method=\"POST\"',\n\t  callback: function callback() {\n\t    return 'HTML Error: Invalid Session';\n\t  }\n\t}, {\n\t  contentType: 'text/html',\n\t  search: 'class=\"bd-errorMsg\"',\n\t  callback: function callback(body) {\n\t    var jx = (0, _utils.stringToJs)(body);\n\t    var p = jx.html.body.div.div.p[1];\n\t    return 'HTML Error: ' + p._;\n\t  }\n\t}, {\n\t  contentType: 'application/xml',\n\t  search: '<level>ERROR</level>',\n\t  callback: function callback(body) {\n\t    var jx = (0, _utils.stringToJs)(body);\n\t    var msg = jx.import.message;\n\t    return 'HTML Error: ' + msg;\n\t  }\n\t}];\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\texports.default = [{\n\t  contentType: 'text/html',\n\t  search: '<title>Error 500 Server Error</title>',\n\t  callback: function callback(body) {\n\t    var jx = (0, _utils.stringToJs)(body);\n\t    var p = jx.html.body.p._;\n\t    var pre = jx.html.body.pre.join('\\n');\n\t    return 'Server Error: ' + p + pre;\n\t  }\n\t}, {\n\t  contentType: 'application/xml',\n\t  search: '<errorMessage><message>',\n\t  callback: function callback(body) {\n\t    var jx = (0, _utils.stringToJs)(body);\n\t    var msg = jx.errorMessage.message;\n\t    return 'Server Error: ' + msg;\n\t  }\n\t}];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** scripts/lib-bb-portal-rest.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1e08ea2194cb6d12be8d\n **/","import BBReq from './request';\nimport response from './response';\nimport * as utils from './utils';\n\nconst defaults = {\n  scheme: 'http',\n  host: 'localhost',\n  port: '7777',\n  context: 'portalserver',\n  username: 'admin',\n  password: 'admin',\n  portal: null,\n  outputJxon: true,\n  verbose: false,\n};\n\nfunction BBRest(config) {\n  this.config = config;\n  this.config.log('Configuration', config);\n}\n\nexport default function create(cnf) {\n  if (!{}.hasOwnProperty.call(cnf, 'plugin')) {\n    throw new Error('Configuration object must define plugin property');\n  }\n  const config = Object.assign({}, defaults, cnf);\n  if (!{}.hasOwnProperty.call(cnf.plugin, 'response')) {\n    config.plugin.response = response;\n  }\n\n  if (cnf.verbose) {\n    if ({}.hasOwnProperty.call(cnf.plugin, 'log')) {\n      config.log = cnf.plugin.log;\n    } else {\n      config.log = console.log;\n    }\n  } else {\n    config.log = () => {};\n  }\n\n  return new BBRest(config);\n}\n\nObject.assign(BBRest.prototype, {\n  server() {\n    return new BBReq('server', this.config, ['portals']);\n  },\n  portal() {\n    const a = ['portals', this.config.portal];\n    return new BBReq('portal', this.config, a);\n  },\n  catalog(item) {\n    const a = ['catalog'];\n    if (item) a.push(item);\n    return new BBReq('server', this.config, a);\n  },\n  portalCatalog(item) {\n    const a = ['portals', this.config.portal, 'catalog'];\n    if (item) a.push(item);\n    return new BBReq('portal', this.config, a);\n  },\n  container(containerName) {\n    const a = ['portals', this.config.portal, 'containers'];\n    if (containerName) a.push(containerName);\n    return new BBReq('container', this.config, a);\n  },\n  widget(widgetName) {\n    const a = ['portals', this.config.portal, 'widgets'];\n    if (widgetName) a.push(widgetName);\n    return new BBReq('widget', this.config, a);\n  },\n  page(pageName) {\n    const a = ['portals', this.config.portal, 'pages'];\n    if (pageName) a.push(pageName);\n    return new BBReq('page', this.config, a);\n  },\n  link(linkName) {\n    const a = ['portals', this.config.portal, 'links'];\n    if (linkName) a.push(linkName);\n    return new BBReq('link', this.config, a);\n  },\n  user(userName, showGroups, groupName) {\n    const a = ['users'];\n    if (userName) a.push(userName);\n    if (showGroups) a.push('groups');\n    if (groupName) a.push(groupName);\n    return new BBReq('user', this.config, a);\n  },\n  group(groupName, showUsers, userName) {\n    const a = ['groups'];\n    if (groupName) a.push(groupName);\n    if (showUsers) a.push('users');\n    if (userName) a.push(userName);\n    return new BBReq('group', this.config, a);\n  },\n  template(templateName) {\n    const a = ['templates'];\n    if (templateName) a.push(templateName);\n    return new BBReq('template', this.config, a);\n  },\n  audit(meta) {\n    return new BBReq('audit', this.config, [meta ? 'auditmeta' : 'auditevents']);\n  },\n  cache(type) {\n    const a = ['caches', type];\n    return new BBReq('cache', this.config, a);\n  },\n  import() {\n    const a = ['import', 'portal'];\n    return new BBReq('import', this.config, a);\n  },\n  importItem(toPortal) {\n    const a = ['import', 'package'];\n    if (toPortal) a.push(this.config.portal);\n    return new BBReq('importItem', this.config, a);\n  },\n  export(uuid) {\n    let a;\n    if (uuid) {\n      a = ['orchestrator', 'export', 'files', uuid];\n      return new BBReq('export', this.config, a);\n    }\n    a = ['export', 'portal'];\n    return new BBReq('export', this.config, a)\n    .query({ portalName: this.config.portal, includeGroups: true });\n  },\n  exportItem(itemName, fromPortal) {\n    const a = ['export', 'package'];\n    if (fromPortal) a.push(this.config.portal);\n    a.push(itemName);\n    return new BBReq('exportItem', this.config, a);\n  },\n  auto(payload, overrideMethod) {\n    const payloadType = utils.getPayloadType(payload);\n    let payloadParse;\n    const t = this;\n\n    if (payloadType === 'path') {\n      return this.config.plugin.get(payload)\n      .then((payloadRes) =>\n        t.doAuto(utils.stringToJs(payloadRes), overrideMethod)\n      );\n    }\n    if (payloadType === 'xml') payloadParse = utils.stringToJs(payload);\n    return t.doAuto(payloadParse || payload, overrideMethod);\n  },\n  doAuto(jx, overrideMethod) {\n    const aKey = Object.keys(jx)[0];\n    const bKey = Object.keys(jx[aKey])[0];\n    const context = jx[aKey][bKey].contextItemName;\n    const items = ['container', 'widget', 'page', 'link', 'template', 'user', 'group'];\n    let method;\n    let httpMethod;\n\n    switch (aKey) {\n      case 'catalog':\n        if (context === '[BBHOST]') {\n          method = 'catalog';\n          httpMethod = 'post';\n        } else {\n          method = 'portalCatalog';\n          httpMethod = 'post';\n        }\n        break;\n      case 'portals':\n        method = 'server';\n        httpMethod = 'post';\n        break;\n      case 'portal':\n        method = 'server';\n        httpMethod = 'put';\n        break;\n      default: {\n        const plural = aKey.charAt(aKey.length - 1) === 's';\n        if (plural) {\n          if (aKey.substr(0, aKey.length - 1) === bKey) {\n            method = bKey;\n            httpMethod = 'post';\n          } else {\n            throw new Error(`${aKey} must be plural of ${bKey}`);\n          }\n        } else {\n          if (items.indexOf(aKey) !== -1) {\n            method = aKey;\n            httpMethod = 'put';\n          } else {\n            method = aKey;\n            httpMethod = 'post';\n          }\n        }\n        break;\n      }\n    }\n\n    if (overrideMethod) httpMethod = overrideMethod;\n    return this[method]()[httpMethod](jx);\n  },\n\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/index.js\n **/","import * as utils from './utils';\n\n// cache names for deleteAll\nconst cch = ['globalModelCache',\n  'retrievedWidgetCache',\n  'widgetChromeStaticCache',\n  'serverSideClosureCache',\n  'urlLevelCache',\n  'contentTemplateCache',\n  'webCache',\n  'gModelCache',\n  'uuidFromExtendedItemNamesCache',\n  'springAclCacheRegion',\n  'springAclSidCacheRegion',\n  'contextNameToItemNameToUuidCache',\n  'widgetCache',\n  'uuidToContentReferencesCache',\n  'itemUuidToReferencingLinkUuidsCache',\n  'uuidToCacheKeysCache',\n  'versionBundleCache',\n];\n\nfunction getFullUri(url, query) {\n  const params = Object.keys(query);\n  let fullUrl = url;\n  if (params.length) {\n    params.map((key) =>\n      `${encodeURIComponent(key)}=${encodeURIComponent(query[key])}`\n    );\n    fullUrl += `?${params.join('&')}`;\n  }\n  return fullUrl;\n}\n\nexport default function BBReq(cmnd, cnf, uri) {\n  this.command = cmnd;\n  this.config = Object.assign({}, cnf);\n  this.uri = uri;\n  this.qs = {};\n  this.headers = {\n    'Content-Type': 'application/xml',\n  };\n}\nObject.assign(BBReq.prototype, {\n  rights() {\n    this.uri.push('rights');\n    return this;\n  },\n  tag(tagName, tagType) {\n    this.uri.push('tags');\n    if (tagName) this.uri.push(tagName);\n    if (tagType) this.qs.type = tagType;\n    return this;\n  },\n  query(o) {\n    this.qs = o;\n    return this;\n  },\n  file(file) {\n    if (this.uri[0] === 'import') {\n      this.headers['Content-Type'] = 'multipart/form-data';\n      this.headers.Connection = 'keep-alive';\n      if (this.uri[1] !== 'package') {\n        this.uri = ['orchestrator', 'import', 'upload'];\n      }\n    }\n    this.targetFile = file;\n    return this;\n  },\n  get() {\n    /* methods that use .xml:\n     * portal().xml().get()\n     * portalCatalog('item').get()\n     * container('name').xml().get()\n     * widget('name').xml().get()\n     * page('name').xml().get()\n     * link('name').xml().get() */\n    if (this.uri[0] === 'portals' && this.uri.length === 2) this.uri[1] += '.xml';\n    if (this.uri[2] === 'catalog' && this.uri[3]) this.uri[3] += '.xml';\n    if (this.uri[4] !== 'rights') {\n      if (this.uri[2] === 'pages' && this.uri[3]) this.uri[3] += '.xml';\n      if (this.uri[2] === 'containers' && this.uri[3]) this.uri[3] += '.xml';\n      if (this.uri[2] === 'widgets' && this.uri[3]) this.uri[3] += '.xml';\n      if (this.uri[2] === 'links' && this.uri[3]) this.uri[3] += '.xml';\n    }\n    this.method = 'GET';\n    return this.prepareRequest();\n  },\n  post(payload) {\n    this.method = 'POST';\n    if (this.uri[0] === 'export' && this.uri[1] !== 'package') {\n      this.uri = ['orchestrator', 'export', 'exportrequests'];\n    }\n    return this.prepareRequest(payload);\n  },\n  put(payload) {\n    this.method = 'PUT';\n    return this.prepareRequest(payload);\n  },\n  // fixing inconsistencies in API\n  // server /delete/catalog POST\n  // portal /portals/[portal_name]/delete/catalog POST\n  // link /portals/[portal_name]/delete/links POST\n  delete(payload) {\n    this.method = 'DELETE';\n    if (payload) {\n      this.method = 'POST';\n      switch (this.command) {\n        case 'server':\n          this.uri = ['delete', 'catalog'];\n          break;\n        case 'portal':\n          this.uri[2] = 'delete';\n          this.uri[3] = 'catalog';\n          break;\n        case 'link':\n          this.uri[2] = 'delete';\n          this.uri[3] = 'links';\n          break;\n        default:\n          // code\n      }\n    }\n    if (this.command === 'cache' && this.uri[1] === 'all') {\n      return this.deleteAllCache(0);\n    }\n    return this.prepareRequest(payload);\n  },\n  prepareRequest(payload) {\n    const payloadType = payload ? utils.getPayloadType(payload) : '';\n    const toSend = {\n      url: getFullUri(this.getUri(), this.qs),\n      method: this.method,\n      query: this.qs,\n      headers: this.headers,\n      username: this.config.username,\n      password: this.config.password,\n      file: this.targetFile,\n    };\n    if (this.targetFile) {\n      if (this.method === 'POST') {\n        toSend.upload = (toSend.url.indexOf('import/package') === -1) ? 'file' : 'package';\n      } else if (toSend.url.indexOf('/export/') > -1) {\n        toSend.download = true;\n      }\n    }\n    const that = this;\n\n    switch (payloadType) {\n      case 'jxon':\n        toSend.body = utils.jsToString(payload);\n        return this.doRequest(toSend);\n      case 'path':\n        return this.config.plugin.getRequestBody(payload)\n          .then((fileContent) => {\n            toSend.body = fileContent;\n            return that.doRequest(toSend);\n          });\n      default:\n        toSend.body = payload;\n        return this.doRequest(toSend);\n    }\n  },\n  doRequest(toSend) {\n    const that = this;\n    return this.config.plugin.request(toSend, this.config.log)\n      .then((res) => {\n        that.config.log('Response', res);\n        return that.config.plugin.response(that.config, toSend, res);\n      });\n  },\n  deleteAllCache(i) {\n    const t = this;\n    this.uri[1] = cch[i];\n    return this.prepareRequest()\n      .then((v) => {\n        if (i < cch.length - 1) return t.deleteAllCache(i + 1);\n        return v;\n      })\n      .catch((r) => {\n        if (r.response.status === 404 && i < cch.length - 1) return t.deleteAllCache(i + 1);\n        return r;\n      });\n  },\n  getUri() {\n    let cfg = this.config;\n    if (this.uri[0] === 'orchestrator' && cfg.orchestrator) cfg = this.config.orchestrator;\n\n    return `${cfg.scheme}://${cfg.host}:${cfg.port}/${cfg.context}/${this.uri.join('/')}`;\n  },\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/request.js\n **/","import jxon from 'jxon';\n\nlet lastError;\njxon.config({\n  parserErrorHandler: function onError(level, msg) {\n    lastError.level = level;\n    lastError.msg = msg;\n  },\n});\n\nexport function jsToString(js) {\n  try {\n    const ret = jxon.jsToString(js);\n    if (ret[0] !== '<') throw new Error('Invalid parameter:');\n    return ret;\n  } catch (err) {\n    const e = new Error(`jxon.jsToString error\\n${err.message}\\n${JSON.stringify(js)}`);\n    e.error = err;\n    throw e;\n  }\n}\nexport function stringToJs(str) {\n  try {\n    if (typeof str !== 'string') throw new TypeError('Invalid parameter:');\n    if (!str.length) return {};\n    lastError = {};\n    let ret;\n    if (typeof DOMParser !== 'undefined') { // if runs in browser\n      const xml = jxon.stringToXml(str);\n      const el = xml.getElementsByTagName('parsererror');\n      ret = jxon.xmlToJs(xml);\n\n      if (el.length > 0) {\n        lastError.level = 'fatalError';\n        lastError.msg = jxon.xmlToJs(el[0]).div._;\n      }\n    } else {\n      ret = jxon.stringToJs(str);\n    }\n    if (lastError.level && lastError.level !== 'warning') throw new Error(lastError.msg);\n    return ret;\n  } catch (err) {\n    const e = new Error(`jxon.stringToJs error\\n${err.message}\\n${JSON.stringify(str)}`);\n    e.error = err;\n    throw e;\n  }\n}\n\nexport function getPayloadType(payload) {\n  if (typeof payload === 'object') return 'jxon';\n  if (typeof payload !== 'string' || payload === '') throw new Error(`Wrong payload: ${payload}`);\n  if (payload.trim().charAt(0) === '<') return 'xml';\n  return 'path';\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/utils.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jxon\"\n ** module id = 3\n ** module chunks = 0\n **/","import * as utils from './utils';\nimport matches2xx from './errors/2xx';\nimport matches5xx from './errors/5xx';\n\nclass CXPError extends Error {\n  constructor(message, raw, toSend, config) {\n    super(`${message} ${toSend.url}`);\n    this.response = raw;\n    this.request = toSend;\n    this.config = config;\n    Error.captureStackTrace(this, this.constructor.name);\n  }\n}\n\nfunction getContentType(headers) {\n  const typeHeader = headers['content-type'];\n  return typeHeader ? typeHeader.split(';')[0] : '';\n}\n\nfunction matchError(matches, headers, body) {\n  const contentType = getContentType(headers);\n\n  const match = matches.find((item) => \n    body.indexOf(item.search) > -1 && item.contentType === contentType\n  );\n  if (match) return match.callback(body);\n  return false;\n}\n\n/*\n * config - bbrest main config object(scheme, host etc)\n * toSend - object passed to plugin.request(url, method, query, headers...)\n * res - response object(status, statusText, headers, body)\n */\nexport default function parseResponse(config, toSend, res) {\n  let errorMessage;\n\n  if (res.status >= 200 && res.status < 300) {\n    if (errorMessage = matchError(matches2xx, res.headers, res.body)) {\n      throw new CXPError(errorMessage, res, toSend, config);\n    }\n    // download\n    if (getContentType(res.headers) === 'application/octet-stream') return toSend.file;\n\n    if (config.outputJxon) {\n      return utils.stringToJs(res.body);\n    }\n    return res.body;\n  } else if (res.status >= 300 && res.status < 400) {\n    const href = config.plugin.urlParse(res.headers.location);\n    throw new CXPError(`CXPRedirect: ${href.query.errorMessage}`, res, toSend, config);\n  } else if (res.status >= 400 && res.status < 500) {\n    throw new CXPError(`${res.status} ${res.statusText}`, res, toSend, config);\n  }\n  if (errorMessage = matchError(matches5xx, res.headers, res.body)) {\n    throw new CXPError(errorMessage, res, toSend, config);\n  }\n  throw new CXPError(`${res.status} ${res.statusText}`, res, toSend, config);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/response.js\n **/","import { stringToJs } from '../utils';\n\nexport default [\n  {\n    contentType: 'text/html',\n    search: '<form action=\"/portalserver/j_spring_security_check\" method=\"POST\"',\n    callback: () => 'HTML Error: Invalid Session',\n  },\n  {\n    contentType: 'text/html',\n    search: 'class=\"bd-errorMsg\"',\n    callback: (body) => {\n      const jx = stringToJs(body);\n      const p = jx.html.body.div.div.p[1];\n      return `HTML Error: ${p._}`;\n    },\n  },\n  {\n    contentType: 'application/xml',\n    search: '<level>ERROR</level>',\n    callback: (body) => {\n      const jx = stringToJs(body);\n      const msg = jx.import.message;\n      return `HTML Error: ${msg}`;\n    },\n  },\n];\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/errors/2xx.js\n **/","import { stringToJs } from '../utils';\n\nexport default [\n  {\n    contentType: 'text/html',\n    search: '<title>Error 500 Server Error</title>',\n    callback: (body) => {\n      const jx = stringToJs(body);\n      const p = jx.html.body.p._;\n      const pre = jx.html.body.pre.join('\\n');\n      return `Server Error: ${p}${pre}`;\n    },\n  },\n  {\n    contentType: 'application/xml',\n    search: '<errorMessage><message>',\n    callback: (body) => {\n      const jx = stringToJs(body);\n      const msg = jx.errorMessage.message;\n      return `Server Error: ${msg}`;\n    },\n  },\n];\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/errors/5xx.js\n **/"],"sourceRoot":""}